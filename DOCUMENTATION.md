# Документация проекта КиберБлог

## Обзор проекта

КиберБлог - персональная блог-платформа с киберпанк-дизайном, разработанная на основе веб-фреймворка Flask с использованием MongoDB в качестве базы данных. 

## Архитектура проекта

Проект построен с использованием паттерна "Фабрика приложений" (Application Factory Pattern) во Flask, что обеспечивает гибкость конфигурации и масштабируемость.

### Основные компоненты:

1. **app.py** - основной файл приложения, содержащий фабрику приложения `create_app()`
2. **config.py** - настройки приложения для разных окружений (разработка, тестирование, продакшн)
3. **models/** - модели данных для работы с MongoDB
4. **routes/** - маршруты и контроллеры приложения
5. **templates/** - HTML-шаблоны (Jinja2)
6. **static/** - статические файлы (CSS, JavaScript, изображения)
7. **forms/** - формы для валидации данных
8. **utils/** - вспомогательные функции

## Модели данных

Проект использует MongoDB в качестве NoSQL базы данных. Основные модели:

1. **User** - модель пользователя системы
2. **Post** - модель статьи/поста блога
3. **Comment** - модель комментария к статье
4. **Category** - модель категории статей
5. **Reaction** - модель реакций пользователей на статьи
6. **Thesaurus** - модель для хранения терминов тезауруса

## Маршруты (Routes)

Приложение использует Blueprint-паттерн Flask для организации маршрутов:

1. **main_bp** - основные страницы сайта
2. **auth_bp** - аутентификация и управление пользователями
3. **blog_bp** - функционал блога (статьи, комментарии, категории)
4. **thesaurus_bp** - функционал тезауруса терминов
5. **admin_bp** - административная панель

## Конфигурация

Конфигурация разделена на три окружения:
- **DevelopmentConfig** - настройки для разработки
- **TestingConfig** - настройки для тестирования
- **ProductionConfig** - настройки для промышленной эксплуатации

Основные параметры конфигурации:
- Настройки подключения к MongoDB
- Настройки безопасности (SECRET_KEY)
- Настройки для загрузки файлов и ограничения размеров
- Настройки для отправки email
- Настройки пагинации и кэширования

## Функциональные возможности

### Система пользователей
- Регистрация и аутентификация пользователей
- Профили пользователей с аватарами
- Уровни доступа (обычный пользователь, администратор)

### Блог
- Создание, редактирование и удаление статей
- Поддержка Markdown с подсветкой синтаксиса
- Категории и теги для статей
- Система комментариев
- Реакции на статьи (лайки и другие эмоции)

### Тезаурус
- База терминов с определениями
- Категоризация терминов
- Возможность добавления и редактирования терминов

### Административная панель
- Управление пользователями
- Модерация контента
- Управление категориями
- Статистика использования

## Технические детали

### Используемые расширения Flask:
- **Flask-Login** - для управления сессиями пользователей
- **Flask-WTF** - для работы с формами и защиты от CSRF
- **Flask-PyMongo** - для работы с MongoDB
- **Flask-Misaka** - для рендеринга Markdown
- **Flask-Mail** - для отправки email

### Безопасность:
- Хэширование паролей
- CSRF-защита для форм
- Проверка загружаемых файлов
- Защита от XSS через Markdown-парсер

## Установка и запуск

### Предварительные требования:
- Python 3.8+
- MongoDB

### Установка:
1. Клонировать репозиторий
2. Создать виртуальное окружение Python
3. Установить зависимости из requirements.txt
4. Настроить переменные окружения в файле .env
5. Запустить приложение через Flask или WSGI-сервер

### Переменные окружения:
- `SECRET_KEY` - секретный ключ для Flask
- `MONGO_URI` - URI подключения к MongoDB
- `MAIL_*` - настройки для отправки email
- `FLASK_ENV` - окружение (development, testing, production)

## Структура проекта

```
cyberblog/
├── app.py                  # Точка входа в приложение
├── config.py               # Конфигурация приложения
├── requirements.txt        # Зависимости проекта
├── models/                 # Модели данных
│   ├── user.py             # Модель пользователя
│   ├── post.py             # Модель статьи
│   ├── comment.py          # Модель комментария
│   ├── category.py         # Модель категории
│   ├── reaction.py         # Модель реакции
│   └── thesaurus.py        # Модель термина тезауруса
├── routes/                 # Маршруты и представления
│   ├── main.py             # Основные страницы
│   ├── auth.py             # Аутентификация
│   ├── blog.py             # Функционал блога
│   ├── thesaurus.py        # Функционал тезауруса
│   ├── admin.py            # Административная панель
│   ├── errors.py           # Обработчики ошибок
│   └── context_processors.py # Контекстные процессоры
├── forms/                  # Формы
├── utils/                  # Вспомогательные функции
├── static/                 # Статические файлы
│   ├── css/                # CSS-стили
│   ├── js/                 # JavaScript-файлы
│   ├── img/                # Изображения
│   └── uploads/            # Загруженные пользователями файлы
└── templates/              # HTML-шаблоны
    ├── base.html           # Базовый шаблон
    ├── index.html          # Главная страница
    ├── auth/               # Шаблоны авторизации
    ├── blog/               # Шаблоны блога
    ├── thesaurus/          # Шаблоны тезауруса
    ├── admin/              # Шаблоны админки
    └── errors/             # Шаблоны ошибок
```

## Лицензия

MIT License 